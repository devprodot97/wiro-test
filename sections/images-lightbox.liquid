<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightbox2@2.11.5/dist/css/lightbox.min.css">

<section id="{{ section.id }}-lightbox">
  <div class="lightbox-item">
    {% for block in section.blocks %}
      <!-- Ensure each block has a unique identifier for Lightbox groups -->
      <a href="{{ block.settings.image | image_url: width: 800, height: 600 }}" 
         data-lightbox="lightbox-group-{{ section.id }}" 
         data-title="{{ block.settings.product.title }}">
        <img src="{{ block.settings.image | image_url: width: 300, height: 200 }}" alt="Image #{{ forloop.index }}">
      </a>
    {% endfor %}
  </div>
</section>

{% schema %}
{
  "name": "Image LightBox",
  "settings": [],
  "blocks": [
    {
      "type": "images",
      "name": "Lightbox Images",
      "limit": 5,
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "product",
          "id": "product",
          "label": "Select Product"
        }
      ]
    }
  ]
}
{% endschema %}

<script src="https://cdn.jsdelivr.net/npm/lightbox2@2.11.5/dist/js/lightbox.min.js"></script>
<script>
  lightbox.option({
    'resizeDuration': 200,
    'wrapAround': true
  });
</script>
